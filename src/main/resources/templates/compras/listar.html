<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Compras Realizadas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { background: rgba(255,255,255,0.95); border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); padding: 30px; margin-top: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        h2 { color: #2c3e50; font-weight: 600; margin-bottom: 30px; text-align: center; }
        .btn { border-radius: 25px; padding: 12px 30px; font-weight: 600; transition: all 0.3s ease; border: none; text-transform: uppercase; letter-spacing: 0.5px; font-size: 0.95rem; margin-right: 10px; }
        .btn-primary { background: linear-gradient(45deg, #667eea, #764ba2); box-shadow: 0 4px 15px rgba(102,126,234,0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102,126,234,0.4); }
        .btn-secondary { background: linear-gradient(45deg, #6c757d, #495057); box-shadow: 0 4px 15px rgba(108,117,125,0.3); }
        .btn-secondary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(108,117,125,0.4); }
        .table { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.1); margin-top: 20px; }
        .table thead th { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 15px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; font-size: 0.85rem; }
        .table tbody tr { transition: all 0.3s ease; }
        .table tbody tr:hover { background: linear-gradient(135deg, #f8f9fa, #e9ecef); transform: scale(1.01); }
        .table tbody td { padding: 15px; border: none; border-bottom: 1px solid #dee2e6; vertical-align: middle; }
        .btn-sm { border-radius: 20px; padding: 6px 15px; font-size: 0.8rem; margin: 2px; transition: all 0.3s ease; }
        .alert-success { background: linear-gradient(135deg, #d4edda, #c3e6cb); color: #155724; border-radius: 15px; border: none; padding: 15px 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .alert-danger { background: linear-gradient(135deg, #f8d7da, #f5c6cb); color: #721c24; border-radius: 15px; border: none; padding: 15px 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .text-center { text-align: center; }
        .text-muted { color: #6c757d !important; font-style: italic; }
        @media (max-width: 768px) { .container { margin: 10px; padding: 20px; } .table-responsive { border-radius: 15px; overflow: hidden; } .btn { margin-bottom: 10px; width: 100%; } .btn-sm { width: auto; margin: 2px; } }
        .badge-success {
            color: #fff;
            background-color: #28a745;
            font-size: 1.1em;
        }
        .badge-warning {
            color: #212529;
            background-color: #ffc107;
            font-size: 1.1em;
        }
        .badge {
            display: inline-block;
            padding: .25em .4em;
            font-size: 16px;
            font-weight: 700;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: .25rem;
            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h2>Compras Realizadas</h2>
        <div th:if="${mensagem}" class="alert alert-success" role="alert">
            <span th:text="${mensagem}"></span>
        </div>
        <div th:if="${mensagemErro}" class="alert alert-danger" role="alert">
            <span th:text="${mensagemErro}"></span>
        </div>
        <div class="mb-3">
            <a href="/compras/nova" class="btn btn-primary">Nova Compra</a>
            <a href="/" class="btn btn-secondary">Voltar</a>
        </div>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Fornecedor</th>
                        <th>Data</th>
                        <th>Valor Total</th>
                        <th>ICMS Crédito</th>
                        <th>Saldo Devedor</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="compra : ${compras}">
                        <td th:text="${compra.id}"></td>
                        <td th:text="${compra.fornecedor.nome}"></td>
                        <td th:text="${#temporals.format(compra.dataCompra, 'dd/MM/yyyy')}"></td>
                        <td th:text="${#numbers.formatCurrency(compra.valorTotal)}"></td>
                        <td th:text="${#numbers.formatCurrency(compra.valorIcmsCredito)}"></td>
                        <td class="text-center">
                            <span th:if="${compra.saldoDevedor > 0}" class="badge badge-warning" th:text="${#numbers.formatCurrency(compra.saldoDevedor)}"></span>
                            <span th:if="${compra.saldoDevedor == 0}" class="badge badge-success">Pago</span>
                        </td>
                        <td>
                            <a th:href="@{'/compras/' + ${compra.id}}" class="btn btn-info btn-sm">Detalhar</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div th:if="${#lists.isEmpty(compras)}" class="text-center mt-4">
            <p class="text-muted">Nenhuma compra registrada.</p>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 